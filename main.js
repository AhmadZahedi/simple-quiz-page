const quizData = [
    {
        id: 1,
        text: 'Occupational Therapy Fundamentals',
        sectionTitle: 'category one',
        questions: [
            {
                id: 1,
                score: 100,
                body: 'What was the organization founded in 1917 that played a key role in the development of occupational therapy in the United States?',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 2,
                score: 300,
                body: 'What was the organization founded in 1917 that played a key role in the development of occupational therapy in the United States?',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 3,
                score: 200,
                body: 'What was the organization founded in 1917 that played a key role in the development of occupational therapy in the United States?',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 4,
                score: 200,
                body: 'What was the organization founded in 1917 that played a key role in the development of occupational therapy in the United States?',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 5,
                score: 500,
                body: 'What was the organization founded in 1917 that played a key role in the development of occupational therapy in the United States?',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 6,
                score: 300,
                body: 'What was the organization founded in 1917 that played a key role in the development of occupational therapy in the United States?',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            }
        ]
    },
    {
        id: 2,
        text: 'Anatomy and Physiology',
        sectionTitle: 'category two',
        questions: [
            {
                id: 1,
                score: 200,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 2,
                score: 300,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 3,
                score: 400,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 4,
                score: 200,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 5,
                score: 600,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 6,
                score: 300,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            }
        ]
    },

    {
        id: 3,
        text: 'Assessment and Evaluation',
        sectionTitle: 'category three',
        questions: [
            {
                id: 1,
                score: 200,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 2,
                score: 300,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 3,
                score: 400,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 4,
                score: 200,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 5,
                score: 600,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 6,
                score: 300,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            }
        ]
    },
    {
        id: 4,
        text: 'Treatment Interventions',
        sectionTitle: 'category four',
        questions: [
            {
                id: 1,
                score: 200,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 2,
                score: 300,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 3,
                score: 400,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 4,
                score: 200,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 5,
                score: 600,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 6,
                score: 300,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            }
        ]
    },
    {
        id: 5,
        text: 'Pediatric Occupational Therapy',
        sectionTitle: 'category five',
        questions: [
            {
                id: 1,
                score: 200,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 2,
                score: 300,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 3,
                score: 400,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 4,
                score: 200,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 5,
                score: 600,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 6,
                score: 300,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            }
        ]
    },
    {
        id: 6,
        text: 'Occupational Therapy Ethics and Professionalism',
        sectionTitle: 'category six',
        questions: [
            {
                id: 1,
                score: 200,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 2,
                score: 300,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 3,
                score: 400,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 4,
                score: 200,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 5,
                score: 600,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            },
            {
                id: 6,
                score: 300,
                body: '',
                options: [
                    'A',
                    'B',
                    'C',
                    'D'
                ],
                answer: 'option A'
            }
        ]
    }
];

const categoriesButtonsSection = document.querySelector('#categories-button-section');
const categoriesSection = document.querySelector('#categories-section');

function createTagWithClassList(classArray, tagName = 'div') {
    const result = document.createElement(tagName);
    result.classList.add(...classArray);
    return result;
}

function createDom() {
    quizData.forEach((item) => {
        const btnElement = createTagWithClassList(['category-button', 'p-4'], 'button');
        btnElement.innerText = item.text;
        btnElement.addEventListener('click', () => goToCategoryById(item.id));
        categoriesButtonsSection.appendChild(btnElement);

        const categoryElement = createTagWithClassList(['vh-100', 'd-flex', 'flex-column', 'justify-content-between'], 'div');
        categoryElement.id = `category-${item.id}`;

        const categoryTitleElement = createTagWithClassList(['d-flex', 'justify-content-between', 'align-items-center']);

        const categoryTitleText = createTagWithClassList(['category__title'], 'a');
        categoryTitleText.innerText = `${item.sectionTitle}`;
        categoryTitleText.href = `#category-${item.id}`;

        const categoryTitleButton = createTagWithClassList(['back-to-categories-button', 'd-flex', 'justify-content-center', 'align-items-center', 'p-2'], 'button');
        categoryTitleButton.addEventListener('click', goToCategories);
        categoryTitleButton.innerText = '⬆';

        const categoryQuestionsElement = createTagWithClassList(['row', 'row-cols-3', 'flex-grow-1']);

        item.questions.forEach((question) => {
            const questionGroup = createTagWithClassList(['question__container', 'd-flex', 'flex-column', 'my-2']);

            const questionContainer = createTagWithClassList(['flex-90', 'pb-4']);

            const questionAnswer = createTagWithClassList(['flex-10', 'd-flex', 'justify-content-center', 'align-items-center', 'fs-1', 'text-bg-success', 'rounded', 'user-select-none']);
            questionAnswer.innerText = question.answer;

            const questionCover = createTagWithClassList(['question-cover', 'd-flex', 'align-items-center', 'justify-content-center', 'rounded']);
            questionCover.addEventListener('click', () => toggleQuestionCover(questionCover));
            questionCover.innerText = question.id;

            const questionCoverScore = createTagWithClassList(['question-score', 'fs-3', 'text-bg-danger', 'px-5', 'rounded', 'd-flex', 'gap-3']);

            const questionCoverScoreIcon = document.createElement('span');
            questionCoverScoreIcon.innerText = '🎁';

            const questionCoverScoreValue = document.createElement('span');
            questionCoverScoreValue.innerText = question.score;

            questionCoverScore.appendChild(questionCoverScoreIcon);
            questionCoverScore.appendChild(questionCoverScoreValue);

            questionCover.appendChild(questionCoverScore);

            const answerCover = createTagWithClassList(['answer-cover', 'd-flex', 'align-items-center', 'justify-content-center', 'rounded', 'text-bg-warning']);
            answerCover.addEventListener('click', () => toggleAnswerCover(answerCover));
            answerCover.innerText = '?';

            questionGroup.appendChild(questionContainer);
            questionGroup.appendChild(questionAnswer);
            questionGroup.appendChild(questionCover);
            questionGroup.appendChild(answerCover);

            categoryQuestionsElement.appendChild(questionGroup);

            const questionBody = createTagWithClassList(['question__body']);
            questionBody.innerText = question.body;

            const questionOptions = createTagWithClassList(['question__options', 'fs-3'], 'ul');

            questionContainer.appendChild(questionBody);
            questionContainer.appendChild(questionOptions);

            question.options.forEach((option) => {
                const questionOption = document.createElement('li');
                questionOption.classList.add('mt-4');
                questionOption.innerText = option;

                questionOptions.appendChild(questionOption);
            });
        });

        categoryTitleElement.appendChild(categoryTitleText);
        categoryTitleElement.appendChild(categoryTitleButton);

        categoryElement.appendChild(categoryTitleElement);
        categoryElement.appendChild(categoryQuestionsElement);

        const categoryDivider = createTagWithClassList(['category--divider']);

        categoriesSection.appendChild(categoryElement);

        categoryElement.parentElement.appendChild(categoryDivider);
    });

    const endSection = createTagWithClassList(['finish-section', 'd-flex', 'justify-content-center', 'align-items-center', 'text-center']);
    endSection.id = 'end-section';
    endSection.innerText = 'thanks for your participation';
}

createDom();

function goToCategories(event) {
    categoriesButtonsSection.scrollIntoView({ behavior: 'smooth' });

    event.stopPropagation();
}

function goToCategoryById(sectionId) {
    const targetCategorySection = document.querySelector(`#category-${sectionId}`);

    targetCategorySection.scrollIntoView({ behavior: 'smooth' });
}

function toggleQuestionCover(coverElement) {
    if (coverElement.classList.contains('question-cover')) {
        coverElement.classList.remove('question-cover');
        coverElement.classList.add('question-cover__hidden');
    } else {
        coverElement.classList.remove('question-cover__hidden');
        coverElement.classList.add('question-cover');
        coverElement.parentElement.lastElementChild.classList.add('answer-cover');
        coverElement.parentElement.lastElementChild.classList.remove('answer-cover__hidden');
    }
}

function toggleAnswerCover(coverElement) {
    if (coverElement.classList.contains('answer-cover')) {
        coverElement.classList.remove('answer-cover');
        coverElement.classList.add('answer-cover__hidden');
    } else {
        coverElement.classList.remove('answer-cover__hidden');
        coverElement.classList.add('answer-cover');
    }
}

function goToFinishSection() {
    const endSection = document.querySelector('#end-section');

    endSection.scrollIntoView({ behavior: 'smooth' });
}

function goToStartSection() {
    const startSection = document.querySelector('#start-section');

    startSection.scrollIntoView({ behavior: 'smooth' });
}